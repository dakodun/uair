<!DOCTYPE html>
<html lang="en-GB">
	<head>
    <title id="title">The LuaAPI</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <div id="site-wrapper">
			<div id="content">
        <div id="nav-home"><a href="../../../index.html">Documentation Home</a></div>
       <div id="nav-left"><a href="index.html">Previous</a></div>
       <div id="nav-center"><a href="index.html">Index</a></div>
       <div id="nav-right"><a href="002.html">Next</a></div>
    
       <div id="content-body">
					<div id='body-main'>
						<h1>Intro to the LuaAPI</h1>
						<p>Declare and initialise a uair::LuaAPI object. A LuaAPI object can be default constructed or move constructed (assigned and swapped) but not copy constructed.</p>
						<div class='code'>
							<div class='codeHeader'>Setting up a LuaAPI Instance</div>
							<pre class='codeBody'><code>uair::LuaAPI luaAPI;</code></pre>
						</div>
						<p>uair::LuaAPI takes the whitelist approach meaning that nothing is available in the environment by default. In order to be of any use, required functions (including both lua functions and user registered custom functions) must be first added to the whitelist and then a new sandbox environment must be created (using the new whitelist).</p>
						<div class='code'>
							<div class='codeHeader'>Setting up the sandbox</div>
							<pre class='codeBody'><code>luaAPI.AddWhitelist("print");
luaAPI.CreateSandbox();</code></pre>
						</div>
						<p>Lua scripts are passed to a uair::LuaAPI instance via a std::string through the CallString functions. There are overloads to pass a variable number of parameters to the script and to recieve multiple return values. There is also a version that forgoes automatic stack management.</p>
						<div class='code'>
							<div class='codeHeader'>Calling a script</div>
							<pre class='codeBody'><code>try {
  // create the string that contains our lua script
  std::string script = R"(
    print("Knock knock.")
  )";

  // call the script with automatic stack management
  // (no paramaters or return values
  luaAPI.CallString(scr);
} catch (std::exception&amp; e) {
  std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
}</code></pre>
						</div>

          </div>
        </div>
      </div>
    </div>
  </body>
</html>
